{% extends "base.html" %}

{% block content %}
    <h1>Experiment {{ experiment.key }}</h1>
    {% if experiment.project %}
        <p>Project: {{ experiment.project }}</p>
    {% endif %}
    <p>Filename: {{ experiment.filename }}</p>
    <p>Args: {{ experiment.args }}</p>
    <p>Dependencies:</p>
    <pre>
    {{ experiment.pythonenv }}
    </pre>
    <dl>
    <dt> Experiment artifacts: </dt>
    {% for key,value in artifacts.iteritems() %}
        <dd><a href={{ value }}> {{ key }} </a></dd>
    {% endfor %} 
    <dt><a href='/delete_experiment/{{ experiment.key }}'> DELETE experiment</a></dt>
    <dt><a href='/tensorboard/{{ experiment.key }}'> View in tensorboard </a></dt>
    <dt> Experiment info: </dt>
    <dd>Status: {{ experiment.status }}</dd>
    <dd>Creation time: {{ experiment.time_added | format_time }}</dd>
    {% if experiment.status == 'finished' or experiment.status == 'running' %}
        <dd>Start time: {{ experiment.time_started | format_time }}</dd>
    {% endif %}
    {% if experiment.status == 'finished' %}
        <dd>Finish time: {{ experiment.time_finished | format_time }}</dd>
    {% endif %}
    {% if experiment.info %}
        {% if 'type' in experiment.info.keys() %}
            {% for infokey, infovalue in experiment.info.iteritems() %}
                {% if not infokey == 'logtail' %}
                    <dd>{{ infokey }} : {{ infovalue }}</dd>
                {% endif %}
            {% endfor %}
        {% endif %}
        {% if 'logtail' in experiment.info.keys() %}
            <dt> Tail of the log: </dt>
            {% for line in experiment.info['logtail'] %}
                <dd>{{ line }}</dd>
            {% endfor %}
        {% endif %}
    {% endif %}
    </dl>
{% endblock %}
